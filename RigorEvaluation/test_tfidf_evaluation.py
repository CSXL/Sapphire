import unittest
from RigorEvaluation.TFIDFEvaluation import TFIDFEvaluation

class test_tfidf_evaluation(unittest.TestCase):
    def setUp(self):
        self.videoID = "RBSUwFGa6Fk"
        self.evaluation = TFIDFEvaluation(self.videoID)

    def test_lower_case_conversion(self):
        self.evaluation.lower_case_conversion()
        expected_sentences = ["let's talk about data science and some of the other related terms you may have heard such as predictive analytics machine learning advanced analytics and others so let's start with the textbook definition of data science so data science is the field of study that that involves extracting knowledge and insights from noisy data and then turning those insights into actions that our business or organization can take okay so let's dig into it a little bit more and discuss what are the different areas that are covered by data science so really data science is the intersection between three different disciplines we start with computer science then we also cover the area of mathematics and then what i think is the most important is business expertise so the intersection of these three disciplines is data science and true data science initiatives involve collaboration across all these three different areas okay so now let's touch on the different types of data science that you can do now what we need to understand here is that we have different data science methods for different questions that we might ask in an organization and these questions can vary by complexity and the value that we get out of them so let's chart them here by complexity and value okay so the first one that we have here is descriptive analytics so this is really about what is happening in my business right and it involves having accurate data collection to make sure that we know what's happening so a a good question we could ask here is well did sales go up or down the next level is diagnostic analytics and this is more about why did something happen so why did sales go up or down and it involves drilling down to the root cause of our problem now the next one that we have is predictive analytics so this is about what is likely to happen next right so what will our sales performance be next quarter and it involves using historical patterns in our uh in our data to predict outcomes in the future and then finally we have prescriptive analytics so this is about what do i need to do next what is the recommended best action for a particular outcome so question we could ask here is what do i need to do to improve sales by 10 right okay so now we can talk about how data science is done and who actually does it so let's look at the data science life cycle and the first thing that we always must start with is business understanding so this is really critical to make sure that we're asking the right question before we go down a lengthy data science initiative and this is where you can see the having the business expertise and the domain expertise can be incredibly critical to make sure that we're asking the right questions okay so once we've defined that we can move on to data mining so this is this is the process of actually going out into our data landscape and procuring the data that we need for our analysis so once we've done that we can move on to data cleaning so the the reality of the marketplace is that once we when we find data it's probably not in the best format that we need it in and it probably has uh some some issues with it right it might have rows that have missing values it might have duplicates in it so there's some preparation and cleaning that we have to do before it's ready for our analysis so once we've done that cleansing we can move on to exploration okay so this is the part of the process that allows us to use different analytical tools that can start helping us answer some of the the types of questions that i mentioned here earlier and if we actually want to get into some of these higher value questions like predictive and prescriptive then we must start using advanced analytical tools such as machine learning tools that leverage massive amounts of computing power and massive amounts of high quality data to make predictions and prescribe actions for the future now once we've done our exploration and perhaps our advanced analytics what do we do next well we need to visualize our insights and outcomes of our analysis okay now i want to quickly touch on who does what in this life cycle so in an organization you may have roles like a business analyst you might have data engineers and then you might have data scientists so business analysts are obviously involved in formulating the questions they have the domain expertise they can help with the business understanding but they're also involved with visualizing our insights in a way that's useful for the business right and then we have folks like data engineering folks so these are the people that can help us find the data clean the data and then also help with some of the exploration we move on to our data scientists so these are the people that will really help us with the exploration they'll help us with the advanced machine learning techniques and they'll also assist in the visualization so you can see there's there's some overlap between the roles and that's why it's critical to have collaboration across these roles and what you also start seeing nowadays in the marketplace is that sometimes business analysts have to do some machine learning they have to help out with exploration data scientists sometimes need to go and find the data on their own so there's a lot of overlap and these different roles must collaborate with each other okay so i hope you can see now how the data science life cycle can help us take noisy data turn it into knowledge and insights and then turn it into meaningful action for our business thank you if you have questions please drop us a line below and if you want to see more videos like this in the future please like and subscribe"]
        self.assertEqual(self.evaluation.total_sentences, expected_sentences)

    def test_evaluate_term_freq(self):
        self.evaluation.evaluate_term_freq()
        expected_tf_score = {'data': 31, 'related': 1, 'terms': 1, 'heard': 1, 'predictive': 3, 'analytics': 7, 'machine': 4, 'learning': 4, 'advanced': 4, 'start': 6, 'textbook': 1, 'definition': 1, 'field': 1, 'study': 1, 'involves': 4, 'extracting': 1, 'knowledge': 2, 'insights': 5, 'noisy': 2, 'turning': 1, 'actions': 2, 'business': 11, 'organization': 3, 'dig': 1, 'little': 1, 'bit': 1, 'discuss': 1, 'different': 8, 'areas': 2, 'covered': 1, 'intersection': 2, 'disciplines': 2, 'cover': 1, 'area': 1, 'mathematics': 1, 'think': 1, 'important': 1, 'expertise': 4, 'true': 1, 'initiatives': 1, 'involve': 1, 'collaboration': 2, 'touch': 2, 'types': 2, 'understand': 1, 'methods': 1, 'ask': 3, 'vary': 1, 'complexity': 2, 'value': 3, 'chart': 1, 'descriptive': 1, 'happening': 2, 'accurate': 1, 'collection': 1, 'sure': 3, 'know': 1, "what's": 1, 'good': 1, 'sales': 4, 'level': 1, 'diagnostic': 1, 'happen': 2, 'drilling': 1, 'root': 1, 'cause': 1, 'problem': 1, 'likely': 1, 'performance': 1, 'quarter': 1, 'historical': 1, 'patterns': 1, 'uh': 2, 'predict': 1, 'outcomes': 2, 'future': 3, 'finally': 1, 'prescriptive': 2, 'recommended': 1, 'best': 2, 'action': 2, 'particular': 1, 'outcome': 1, 'improve': 1, 'life': 3, 'cycle': 3, 'understanding': 2, 'critical': 3, 'asking': 2, 'lengthy': 1, 'initiative': 1, 'domain': 2, 'incredibly': 1, 'defined': 1, 'mining': 1, 'process': 2, 'landscape': 1, 'procuring': 1, 'analysis': 3, 'cleaning': 2, 'reality': 1, 'marketplace': 2, 'find': 3, 'format': 1, 'issues': 1, 'rows': 1, 'missing': 1, 'values': 1, 'duplicates': 1, 'preparation': 1, 'ready': 1, 'cleansing': 1, 'exploration': 5, 'allows': 1, 'analytical': 2, 'tools': 3, 'helping': 1, 'answer': 1, 'mentioned': 1, 'earlier': 1, 'higher': 1, 'leverage': 1, 'massive': 2, 'amounts': 2, 'computing': 1, 'power': 1, 'high': 1, 'quality': 1, 'predictions': 1, 'prescribe': 1, 'visualize': 1, 'quickly': 1, 'roles': 4, 'analyst': 1, 'engineers': 1, 'scientists': 3, 'analysts': 2, 'obviously': 1, 'involved': 2, 'formulating': 1, 'help': 7, "they're": 1, 'visualizing': 1, 'way': 1, 'useful': 1, 'folks': 2, 'engineering': 1, 'people': 2, 'clean': 1, "they'll": 2, 'techniques': 1, 'assist': 1, 'visualization': 1, 'overlap': 2, 'seeing': 1, 'nowadays': 1, 'lot': 1, 'collaborate': 1, 'hope': 1, 'turn': 2, 'meaningful': 1, 'thank': 1, 'drop': 1, 'line': 1, 'videos': 1, 'subscribe': 1}
        self.assertEqual(self.evaluation.tf_score, expected_tf_score)

    def test_evaluate_inverse_doc_freq(self):
        self.evaluation.evaluate_inverse_doc_freq()
        expected_idf_score = {'data': 1, 'related': 1, 'terms': 1, 'heard': 1, 'predictive': 1, 'analytics': 1, 'machine': 1, 'learning': 1, 'advanced': 1, 'start': 1, 'textbook': 1, 'definition': 1, 'field': 1, 'study': 1, 'involves': 1, 'extracting': 1, 'knowledge': 1, 'insights': 1, 'noisy': 1, 'turning': 1, 'actions': 1, 'business': 1, 'organization': 1, 'dig': 1, 'little': 1, 'bit': 1, 'discuss': 1, 'different': 1, 'areas': 1, 'covered': 1, 'intersection': 1, 'disciplines': 1, 'cover': 1, 'area': 1, 'mathematics': 1, 'think': 1, 'important': 1, 'expertise': 1, 'true': 1, 'initiatives': 1, 'involve': 1, 'collaboration': 1, 'touch': 1, 'types': 1, 'understand': 1, 'methods': 1, 'ask': 1, 'vary': 1, 'complexity': 1, 'value': 1, 'chart': 1, 'descriptive': 1, 'happening': 1, 'accurate': 1, 'collection': 1, 'sure': 1, 'know': 1, "what's": 1, 'good': 1, 'sales': 1, 'level': 1, 'diagnostic': 1, 'happen': 1, 'drilling': 1, 'root': 1, 'cause': 1, 'problem': 1, 'likely': 1, 'performance': 1, 'quarter': 1, 'historical': 1, 'patterns': 1, 'uh': 1, 'predict': 1, 'outcomes': 1, 'future': 1, 'finally': 1, 'prescriptive': 1, 'recommended': 1, 'best': 1, 'action': 1, 'particular': 1, 'outcome': 1, 'improve': 1, 'life': 1, 'cycle': 1, 'understanding': 1, 'critical': 1, 'asking': 1, 'lengthy': 1, 'initiative': 1, 'domain': 1, 'incredibly': 1, 'defined': 1, 'mining': 1, 'process': 1, 'landscape': 1, 'procuring': 1, 'analysis': 1, 'cleaning': 1, 'reality': 1, 'marketplace': 1, 'find': 1, 'format': 1, 'issues': 1, 'rows': 1, 'missing': 1, 'values': 1, 'duplicates': 1, 'preparation': 1, 'ready': 1, 'cleansing': 1, 'exploration': 1, 'allows': 1, 'analytical': 1, 'tools': 1, 'helping': 1, 'answer': 1, 'mentioned': 1, 'earlier': 1, 'higher': 1, 'leverage': 1, 'massive': 1, 'amounts': 1, 'computing': 1, 'power': 1, 'high': 1, 'quality': 1, 'predictions': 1, 'prescribe': 1, 'visualize': 1, 'quickly': 1, 'roles': 1, 'analyst': 1, 'engineers': 1, 'scientists': 1, 'analysts': 1, 'obviously': 1, 'involved': 1, 'formulating': 1, 'help': 1, "they're": 1, 'visualizing': 1, 'way': 1, 'useful': 1, 'folks': 1, 'engineering': 1, 'people': 1, 'clean': 1, "they'll": 1, 'techniques': 1, 'assist': 1, 'visualization': 1, 'overlap': 1, 'seeing': 1, 'nowadays': 1, 'lot': 1, 'collaborate': 1, 'hope': 1, 'turn': 1, 'meaningful': 1, 'thank': 1, 'drop': 1, 'line': 1, 'videos': 1, 'subscribe': 1}
        self.assertEqual(self.evaluation.idf_score, expected_idf_score)

    def test_initialize_json_scores(self):
        self.evaluation.evaluate_term_freq()
        self.evaluation.initialize_json_scores()
        expected_idf_score = {}
        print(self.evaluation.idf_score)
        self.assertEqual(self.evaluation.idf_score, expected_idf_score)

    def test_strip_non_ascii(self):
        self.evaluation.strip_non_ascii()
        expected_tf_idf_score = {}
        self.assertEqual(self.evaluation.tf_idf_score, expected_tf_idf_score)

    def test_filter_words(self):
        self.evaluation.strip_non_ascii()
        self.evaluation.filter_words()
        expected_tf_idf_score_n = {}
        self.assertEqual(self.evaluation.tf_idf_score_n, expected_tf_idf_score_n)

    def test_fallback_evaluation(self):
        self.evaluation.strip_non_ascii()
        self.evaluation.filter_words()
        tf_idf_score = self.evaluation.fallback_evaluation()
        expected_tf_idf_score = {'data': 6.377196998473731, 'science': 2.880024450923621, 'business': 2.26287635429713, 'okay': 1.6457282576706402, 'different': 1.6457282576706402, 'help': 1.4400122254618104, 'analytics': 1.4400122254618104, 'need': 1.4400122254618104, 'questions': 1.4400122254618104, 'right': 1.4400122254618104, 'start': 1.2342961932529801, 'let': 1.2342961932529801, 'insights': 1.02858016104415, 'exploration': 1.02858016104415, 'like': 1.02858016104415, 'really': 0.8228641288353201, 'roles': 0.8228641288353201, 'make': 0.8228641288353201, 'machine': 0.8228641288353201, 'learning': 0.8228641288353201, 'advanced': 0.8228641288353201, 've': 0.8228641288353201, 'sales': 0.8228641288353201, 'expertise': 0.8228641288353201, 'involves': 0.8228641288353201, 'future': 0.6171480966264901, 'cycle': 0.6171480966264901, 'question': 0.6171480966264901, 'critical': 0.6171480966264901, 'scientists': 0.6171480966264901, 'predictive': 0.6171480966264901, 'organization': 0.6171480966264901, 'analysis': 0.6171480966264901, 'ask': 0.6171480966264901, 'did': 0.6171480966264901, 'tools': 0.6171480966264901, 'want': 0.6171480966264901, 'life': 0.6171480966264901, 'actually': 0.6171480966264901, 'sure': 0.6171480966264901, 'value': 0.6171480966264901, 'prescriptive': 0.41143206441766006, 'll': 0.41143206441766006, 'knowledge': 0.41143206441766006, 'marketplace': 0.41143206441766006, 'outcomes': 0.41143206441766006, 'people': 0.41143206441766006, 'massive': 0.41143206441766006, 'does': 0.41143206441766006, 'disciplines': 0.41143206441766006, 'noisy': 0.41143206441766006, 'probably': 0.41143206441766006, 'overlap': 0.41143206441766006, 'domain': 0.41143206441766006, 'cleaning': 0.41143206441766006, 'process': 0.41143206441766006, 'uh': 0.41143206441766006, 'types': 0.41143206441766006, 'analysts': 0.41143206441766006, 'turn': 0.41143206441766006, 'analytical': 0.41143206441766006, 'touch': 0.41143206441766006, 'understanding': 0.41143206441766006, 'amounts': 0.41143206441766006, 'areas': 0.41143206441766006, 'asking': 0.41143206441766006, 'talk': 0.41143206441766006, 'best': 0.41143206441766006, 'using': 0.41143206441766006, 'happening': 0.41143206441766006, 'folks': 0.41143206441766006, 'actions': 0.41143206441766006, 'intersection': 0.41143206441766006, 'action': 0.41143206441766006, 'collaboration': 0.41143206441766006, 'involved': 0.41143206441766006, 'complexity': 0.41143206441766006, 'having': 0.41143206441766006, 'happen': 0.41143206441766006, 'good': 0.20571603220883003, 'engineers': 0.20571603220883003, 'field': 0.20571603220883003, 'going': 0.20571603220883003, 'formulating': 0.20571603220883003, 'format': 0.20571603220883003, 'earlier': 0.20571603220883003, 'finally': 0.20571603220883003, 'extracting': 0.20571603220883003, 'engineering': 0.20571603220883003, 'way': 0.20571603220883003, 'duplicates': 0.20571603220883003, 'collaborate': 0.20571603220883003, 'accurate': 0.20571603220883003, 'allows': 0.20571603220883003, 'analyst': 0.20571603220883003, 'answer': 0.20571603220883003, 'area': 0.20571603220883003, 'assist': 0.20571603220883003, 'bit': 0.20571603220883003, 'cause': 0.20571603220883003, 'chart': 0.20571603220883003, 'clean': 0.20571603220883003, 'cleansing': 0.20571603220883003, 'collection': 0.20571603220883003, 'drop': 0.20571603220883003, 'computer': 0.20571603220883003, 'computing': 0.20571603220883003, 'cover': 0.20571603220883003, 'covered': 0.20571603220883003, 'defined': 0.20571603220883003, 'definition': 0.20571603220883003, 'descriptive': 0.20571603220883003, 'diagnostic': 0.20571603220883003, 'dig': 0.20571603220883003, 'discuss': 0.20571603220883003, 'drilling': 0.20571603220883003, 'heard': 0.20571603220883003, 'level': 0.20571603220883003, 'helping': 0.20571603220883003, 'reality': 0.20571603220883003, 'study': 0.20571603220883003, 'seeing': 0.20571603220883003, 'rows': 0.20571603220883003, 'root': 0.20571603220883003, 'related': 0.20571603220883003, 'recommended': 0.20571603220883003, 'ready': 0.20571603220883003, 'techniques': 0.20571603220883003, 'quickly': 0.20571603220883003, 'quarter': 0.20571603220883003, 'quality': 0.20571603220883003, 'procuring': 0.20571603220883003, 'problem': 0.20571603220883003, 'prescribe': 0.20571603220883003, 'subscribe': 0.20571603220883003, 'terms': 0.20571603220883003, 'high': 0.20571603220883003, 'useful': 0.20571603220883003, 'visualizing': 0.20571603220883003, 'visualize': 0.20571603220883003, 'visualization': 0.20571603220883003, 'videos': 0.20571603220883003, 'vary': 0.20571603220883003, 'values': 0.20571603220883003, 'use': 0.20571603220883003, 'textbook': 0.20571603220883003, 'understand': 0.20571603220883003, 'turning': 0.20571603220883003, 'true': 0.20571603220883003, 'think': 0.20571603220883003, 'thing': 0.20571603220883003, 'thank': 0.20571603220883003, 'preparation': 0.20571603220883003, 'predictions': 0.20571603220883003, 'predict': 0.20571603220883003, 'initiatives': 0.20571603220883003, 'leverage': 0.20571603220883003, 'lengthy': 0.20571603220883003, 'landscape': 0.20571603220883003, 'know': 0.20571603220883003, 'issues': 0.20571603220883003, 'involve': 0.20571603220883003, 'initiative': 0.20571603220883003, 'power': 0.20571603220883003, 'incredibly': 0.20571603220883003, 'improve': 0.20571603220883003, 'important': 0.20571603220883003, 'hope': 0.20571603220883003, 'historical': 0.20571603220883003, 'higher': 0.20571603220883003, 'likely': 0.20571603220883003, 'line': 0.20571603220883003, 'little': 0.20571603220883003, 'look': 0.20571603220883003, 'lot': 0.20571603220883003, 'mathematics': 0.20571603220883003, 'meaningful': 0.20571603220883003, 'mentioned': 0.20571603220883003, 'methods': 0.20571603220883003, 'mining': 0.20571603220883003, 'missing': 0.20571603220883003, 'nowadays': 0.20571603220883003, 'obviously': 0.20571603220883003, 'outcome': 0.20571603220883003, 'particular': 0.20571603220883003, 'patterns': 0.20571603220883003, 'performance': 0.20571603220883003, '10': 0.20571603220883003}
        self.assertEqual(tf_idf_score, expected_tf_idf_score)

if __name__ == '__main__':
    unittest.main()
